#!/bin/zsh
name=$1
method=$2

filename=kensuke/vr_$1_${method}_v2
rm log/$filename.csv
touch log/$filename.csv

trial=10
for decimate in {1..20}; do
    python train.py --repeat 10 --method $method --decimate $decimate --matfile log/mat/${1}-sub${2}-sec1-train.mat 0 0 --no-undersampling
    echo decimate${decimate} >> log/$filename.csv
    for trial in {1..10}; do
        echo -n $trial, >> log/$filename.csv
        for session in {2..4}; do
            python accuracy.py \
                --repeat $trial --problem `expr 10 / $trial` --skip `expr 10 % $trial` \
                --method $method --decimate $decimate \
                --matfile log/mat/${1}-sub${2}-sec${session}-predict.mat \
                --log $filename \
                --no-say-result \
                0 0
        done
        echo "" >> log/$filename.csv
    done
    echo "" >> log/$filename.csv
done
